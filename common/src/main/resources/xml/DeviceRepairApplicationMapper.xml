<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.jinchi.common.mapper.DeviceRepairApplicationMapper" >
  <resultMap id="BaseResultMap" type="com.jinchi.common.domain.DeviceRepairApplication" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Mar 30 15:10:53 CST 2020.
    -->
    <constructor >
        <idArg column="code" jdbcType="BIGINT" javaType="java.lang.Long"/>
      <arg column="dept_code" jdbcType="INTEGER" javaType="java.lang.Integer" />
      <arg column="device_code" jdbcType="BIGINT" javaType="java.lang.Long" />
      <arg column="device_name" jdbcType="VARCHAR" javaType="java.lang.String" />
      <arg column="fixedassets_code" jdbcType="VARCHAR" javaType="java.lang.String" />
      <arg column="fault_content" jdbcType="VARCHAR" javaType="java.lang.String" />
      <arg column="report_time" jdbcType="TIMESTAMP" javaType="java.util.Date" />
      <arg column="report_people" jdbcType="INTEGER" javaType="java.lang.Integer" />
        <arg column="report_phone" jdbcType="VARCHAR" javaType="java.lang.String"/>
        <arg column="receive_time" jdbcType="TIMESTAMP" javaType="java.util.Date"/>
        <arg column="receive_people" jdbcType="INTEGER" javaType="java.lang.Integer"/>
        <arg column="receive_phone" jdbcType="VARCHAR" javaType="java.lang.String"/>
        <arg column="fault_reason" jdbcType="VARCHAR" javaType="java.lang.String"/>
        <arg column="finish_time" jdbcType="TIMESTAMP" javaType="java.util.Date"/>
        <arg column="evaluation_time" jdbcType="TIMESTAMP" javaType="java.util.Date"/>
        <arg column="evaluation_result" jdbcType="VARCHAR" javaType="java.lang.String"/>
        <arg column="repair_status" jdbcType="INTEGER" javaType="java.lang.Integer"/>
        <arg column="emerge_status" jdbcType="INTEGER" javaType="java.lang.Integer"/>
        <arg column="repair_type_id" jdbcType="INTEGER" javaType="java.lang.Integer"/>
        <arg column="repair_time_consuming" jdbcType="VARCHAR" javaType="java.lang.String"/>
    </constructor>
  </resultMap>
  <sql id="Example_Where_Clause" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Mar 30 15:10:53 CST 2020.
    -->
    <where >
      <foreach collection="oredCriteria" item="criteria" separator="or" >
        <if test="criteria.valid" >
          <trim prefix="(" suffix=")" prefixOverrides="and" >
            <foreach collection="criteria.criteria" item="criterion" >
              <choose >
                <when test="criterion.noValue" >
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue" >
                  and ${criterion.condition} #{criterion.value}
                </when>
                <when test="criterion.betweenValue" >
                  and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                </when>
                <when test="criterion.listValue" >
                  and ${criterion.condition}
                  <foreach collection="criterion.value" item="listItem" open="(" close=")" separator="," >
                    #{listItem}
                  </foreach>
                </when>
              </choose>
            </foreach>
          </trim>
        </if>
      </foreach>
    </where>
  </sql>
  <sql id="Update_By_Example_Where_Clause" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Mar 30 15:10:53 CST 2020.
    -->
    <where >
      <foreach collection="example.oredCriteria" item="criteria" separator="or" >
        <if test="criteria.valid" >
          <trim prefix="(" suffix=")" prefixOverrides="and" >
            <foreach collection="criteria.criteria" item="criterion" >
              <choose >
                <when test="criterion.noValue" >
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue" >
                  and ${criterion.condition} #{criterion.value}
                </when>
                <when test="criterion.betweenValue" >
                  and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                </when>
                <when test="criterion.listValue" >
                  and ${criterion.condition}
                  <foreach collection="criterion.value" item="listItem" open="(" close=")" separator="," >
                    #{listItem}
                  </foreach>
                </when>
              </choose>
            </foreach>
          </trim>
        </if>
      </foreach>
    </where>
  </sql>
  <sql id="Base_Column_List" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Mar 30 15:10:53 CST 2020.
    -->
      code, dept_code, device_code, device_name, fixedassets_code, fault_content, report_time,
      report_people, report_phone, receive_time, receive_people, receive_phone, fault_reason,
      finish_time, evaluation_time, evaluation_result, repair_status, emerge_status, repair_type_id,
      repair_time_consuming
  </sql>
  <select id="selectByExample" resultMap="BaseResultMap" parameterType="com.jinchi.common.domain.DeviceRepairApplicationExample" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Mar 30 15:10:53 CST 2020.
    -->
    select
    <if test="distinct" >
      distinct
    </if>
      <include refid="Base_Column_List"/>
      from device_repair_application
      <if test="_parameter != null">
          <include refid="Example_Where_Clause"/>
      </if>
      <if test="orderByClause != null">
          order by ${orderByClause}
      </if>
  </select>
    <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.Long">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Mon Mar 30 15:10:53 CST 2020.
        -->
        select
        <include refid="Base_Column_List"/>
        from device_repair_application
        where code = #{code,jdbcType=BIGINT}
    </select>
    <delete id="deleteByPrimaryKey" parameterType="java.lang.Long">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Mon Mar 30 15:10:53 CST 2020.
        -->
        delete from device_repair_application
        where code = #{code,jdbcType=BIGINT}
    </delete>
    <delete id="deleteByExample" parameterType="com.jinchi.common.domain.DeviceRepairApplicationExample">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Mon Mar 30 15:10:53 CST 2020.
        -->
        delete from device_repair_application
        <if test="_parameter != null">
            <include refid="Example_Where_Clause"/>
        </if>
    </delete>
    <insert id="insert" parameterType="com.jinchi.common.domain.DeviceRepairApplication">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Mon Mar 30 15:10:53 CST 2020.
        -->
        <selectKey resultType="java.lang.Long" keyProperty="code" order="AFTER">
            SELECT LAST_INSERT_ID()
        </selectKey>
        insert into device_repair_application (dept_code, device_code, device_name,
        fixedassets_code, fault_content, report_time,
        report_people, report_phone, receive_time,
        receive_people, receive_phone, fault_reason,
        finish_time, evaluation_time, evaluation_result,
        repair_status, emerge_status, repair_type_id,
        repair_time_consuming)
        values (#{deptCode,jdbcType=INTEGER}, #{deviceCode,jdbcType=BIGINT}, #{deviceName,jdbcType=VARCHAR},
        #{fixedassetsCode,jdbcType=VARCHAR}, #{faultContent,jdbcType=VARCHAR}, #{reportTime,jdbcType=TIMESTAMP},
        #{reportPeople,jdbcType=INTEGER}, #{reportPhone,jdbcType=VARCHAR}, #{receiveTime,jdbcType=TIMESTAMP},
        #{receivePeople,jdbcType=INTEGER}, #{receivePhone,jdbcType=VARCHAR}, #{faultReason,jdbcType=VARCHAR},
        #{finishTime,jdbcType=TIMESTAMP}, #{evaluationTime,jdbcType=TIMESTAMP}, #{evaluationResult,jdbcType=VARCHAR},
        #{repairStatus,jdbcType=INTEGER}, #{emergeStatus,jdbcType=INTEGER}, #{repairTypeId,jdbcType=INTEGER},
        #{repairTimeConsuming,jdbcType=VARCHAR})
    </insert>
    <insert id="insertSelective" parameterType="com.jinchi.common.domain.DeviceRepairApplication">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Mon Mar 30 15:10:53 CST 2020.
        -->
        <selectKey resultType="java.lang.Long" keyProperty="code" order="AFTER">
            SELECT LAST_INSERT_ID()
        </selectKey>
        insert into device_repair_application
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="deptCode != null">
                dept_code,
            </if>
            <if test="deviceCode != null">
                device_code,
            </if>
            <if test="deviceName != null">
                device_name,
      </if>
      <if test="fixedassetsCode != null" >
        fixedassets_code,
      </if>
      <if test="faultContent != null" >
        fault_content,
      </if>
      <if test="reportTime != null" >
        report_time,
      </if>
      <if test="reportPeople != null" >
        report_people,
      </if>
      <if test="reportPhone != null" >
        report_phone,
      </if>
      <if test="receiveTime != null" >
        receive_time,
      </if>
      <if test="receivePeople != null" >
        receive_people,
      </if>
      <if test="receivePhone != null" >
        receive_phone,
      </if>
      <if test="faultReason != null" >
        fault_reason,
      </if>
      <if test="finishTime != null" >
        finish_time,
      </if>
      <if test="evaluationTime != null" >
        evaluation_time,
      </if>
            <if test="evaluationResult != null">
                evaluation_result,
            </if>
            <if test="repairStatus != null">
                repair_status,
            </if>
            <if test="emergeStatus != null">
                emerge_status,
            </if>
            <if test="repairTypeId != null">
                repair_type_id,
            </if>
            <if test="repairTimeConsuming != null">
                repair_time_consuming,
            </if>
        </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="deptCode != null" >
        #{deptCode,jdbcType=INTEGER},
      </if>
      <if test="deviceCode != null" >
        #{deviceCode,jdbcType=BIGINT},
      </if>
      <if test="deviceName != null" >
        #{deviceName,jdbcType=VARCHAR},
      </if>
      <if test="fixedassetsCode != null" >
        #{fixedassetsCode,jdbcType=VARCHAR},
      </if>
      <if test="faultContent != null" >
        #{faultContent,jdbcType=VARCHAR},
      </if>
      <if test="reportTime != null" >
        #{reportTime,jdbcType=TIMESTAMP},
      </if>
      <if test="reportPeople != null" >
        #{reportPeople,jdbcType=INTEGER},
      </if>
      <if test="reportPhone != null" >
        #{reportPhone,jdbcType=VARCHAR},
      </if>
      <if test="receiveTime != null" >
        #{receiveTime,jdbcType=TIMESTAMP},
      </if>
      <if test="receivePeople != null" >
        #{receivePeople,jdbcType=INTEGER},
      </if>
      <if test="receivePhone != null" >
        #{receivePhone,jdbcType=VARCHAR},
      </if>
      <if test="faultReason != null" >
        #{faultReason,jdbcType=VARCHAR},
      </if>
      <if test="finishTime != null" >
        #{finishTime,jdbcType=TIMESTAMP},
      </if>
      <if test="evaluationTime != null" >
        #{evaluationTime,jdbcType=TIMESTAMP},
      </if>
        <if test="evaluationResult != null">
            #{evaluationResult,jdbcType=VARCHAR},
        </if>
        <if test="repairStatus != null">
            #{repairStatus,jdbcType=INTEGER},
        </if>
        <if test="emergeStatus != null">
            #{emergeStatus,jdbcType=INTEGER},
        </if>
        <if test="repairTypeId != null">
            #{repairTypeId,jdbcType=INTEGER},
        </if>
        <if test="repairTimeConsuming != null">
            #{repairTimeConsuming,jdbcType=VARCHAR},
        </if>
    </trim>
  </insert>
  <select id="countByExample" parameterType="com.jinchi.common.domain.DeviceRepairApplicationExample" resultType="java.lang.Integer" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Mar 30 15:10:53 CST 2020.
    -->
    select count(*) from device_repair_application
    <if test="_parameter != null" >
      <include refid="Example_Where_Clause" />
    </if>
  </select>
  <update id="updateByExampleSelective" parameterType="map" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Mar 30 15:10:53 CST 2020.
    -->
    update device_repair_application
    <set >
      <if test="record.code != null" >
        code = #{record.code,jdbcType=BIGINT},
      </if>
      <if test="record.deptCode != null" >
        dept_code = #{record.deptCode,jdbcType=INTEGER},
      </if>
      <if test="record.deviceCode != null" >
        device_code = #{record.deviceCode,jdbcType=BIGINT},
      </if>
      <if test="record.deviceName != null" >
        device_name = #{record.deviceName,jdbcType=VARCHAR},
      </if>
      <if test="record.fixedassetsCode != null" >
        fixedassets_code = #{record.fixedassetsCode,jdbcType=VARCHAR},
      </if>
      <if test="record.faultContent != null" >
        fault_content = #{record.faultContent,jdbcType=VARCHAR},
      </if>
      <if test="record.reportTime != null" >
        report_time = #{record.reportTime,jdbcType=TIMESTAMP},
      </if>
      <if test="record.reportPeople != null" >
        report_people = #{record.reportPeople,jdbcType=INTEGER},
      </if>
      <if test="record.reportPhone != null" >
        report_phone = #{record.reportPhone,jdbcType=VARCHAR},
      </if>
      <if test="record.receiveTime != null" >
        receive_time = #{record.receiveTime,jdbcType=TIMESTAMP},
      </if>
      <if test="record.receivePeople != null" >
        receive_people = #{record.receivePeople,jdbcType=INTEGER},
      </if>
      <if test="record.receivePhone != null" >
        receive_phone = #{record.receivePhone,jdbcType=VARCHAR},
      </if>
      <if test="record.faultReason != null" >
        fault_reason = #{record.faultReason,jdbcType=VARCHAR},
      </if>
      <if test="record.finishTime != null" >
        finish_time = #{record.finishTime,jdbcType=TIMESTAMP},
      </if>
      <if test="record.evaluationTime != null" >
        evaluation_time = #{record.evaluationTime,jdbcType=TIMESTAMP},
      </if>
        <if test="record.evaluationResult != null">
            evaluation_result = #{record.evaluationResult,jdbcType=VARCHAR},
        </if>
        <if test="record.repairStatus != null">
            repair_status = #{record.repairStatus,jdbcType=INTEGER},
        </if>
        <if test="record.emergeStatus != null">
            emerge_status = #{record.emergeStatus,jdbcType=INTEGER},
        </if>
        <if test="record.repairTypeId != null">
            repair_type_id = #{record.repairTypeId,jdbcType=INTEGER},
        </if>
        <if test="record.repairTimeConsuming != null">
            repair_time_consuming = #{record.repairTimeConsuming,jdbcType=VARCHAR},
        </if>
    </set>
    <if test="_parameter != null" >
      <include refid="Update_By_Example_Where_Clause" />
    </if>
  </update>
  <update id="updateByExample" parameterType="map" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Mar 30 15:10:53 CST 2020.
    -->
    update device_repair_application
    set code = #{record.code,jdbcType=BIGINT},
      dept_code = #{record.deptCode,jdbcType=INTEGER},
      device_code = #{record.deviceCode,jdbcType=BIGINT},
      device_name = #{record.deviceName,jdbcType=VARCHAR},
      fixedassets_code = #{record.fixedassetsCode,jdbcType=VARCHAR},
      fault_content = #{record.faultContent,jdbcType=VARCHAR},
      report_time = #{record.reportTime,jdbcType=TIMESTAMP},
      report_people = #{record.reportPeople,jdbcType=INTEGER},
      report_phone = #{record.reportPhone,jdbcType=VARCHAR},
      receive_time = #{record.receiveTime,jdbcType=TIMESTAMP},
      receive_people = #{record.receivePeople,jdbcType=INTEGER},
      receive_phone = #{record.receivePhone,jdbcType=VARCHAR},
      fault_reason = #{record.faultReason,jdbcType=VARCHAR},
      finish_time = #{record.finishTime,jdbcType=TIMESTAMP},
      evaluation_time = #{record.evaluationTime,jdbcType=TIMESTAMP},
      evaluation_result = #{record.evaluationResult,jdbcType=VARCHAR},
      repair_status = #{record.repairStatus,jdbcType=INTEGER},
      emerge_status = #{record.emergeStatus,jdbcType=INTEGER},
      repair_type_id = #{record.repairTypeId,jdbcType=INTEGER},
      repair_time_consuming = #{record.repairTimeConsuming,jdbcType=VARCHAR}
      <if test="_parameter != null">
          <include refid="Update_By_Example_Where_Clause"/>
      </if>
  </update>
    <update id="updateByPrimaryKeySelective" parameterType="com.jinchi.common.domain.DeviceRepairApplication">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Mon Mar 30 15:10:53 CST 2020.
        -->
        update device_repair_application
        <set>
            <if test="deptCode != null">
                dept_code = #{deptCode,jdbcType=INTEGER},
            </if>
            <if test="deviceCode != null">
                device_code = #{deviceCode,jdbcType=BIGINT},
            </if>
            <if test="deviceName != null">
                device_name = #{deviceName,jdbcType=VARCHAR},
            </if>
            <if test="fixedassetsCode != null">
                fixedassets_code = #{fixedassetsCode,jdbcType=VARCHAR},
            </if>
            <if test="faultContent != null">
                fault_content = #{faultContent,jdbcType=VARCHAR},
            </if>
            <if test="reportTime != null">
                report_time = #{reportTime,jdbcType=TIMESTAMP},
            </if>
            <if test="reportPeople != null">
                report_people = #{reportPeople,jdbcType=INTEGER},
            </if>
            <if test="reportPhone != null">
                report_phone = #{reportPhone,jdbcType=VARCHAR},
            </if>
            <if test="receiveTime != null">
                receive_time = #{receiveTime,jdbcType=TIMESTAMP},
            </if>
            <if test="receivePeople != null">
                receive_people = #{receivePeople,jdbcType=INTEGER},
            </if>
            <if test="receivePhone != null">
                receive_phone = #{receivePhone,jdbcType=VARCHAR},
            </if>
            <if test="faultReason != null">
                fault_reason = #{faultReason,jdbcType=VARCHAR},
            </if>
            <if test="finishTime != null">
                finish_time = #{finishTime,jdbcType=TIMESTAMP},
            </if>
            <if test="evaluationTime != null">
                evaluation_time = #{evaluationTime,jdbcType=TIMESTAMP},
            </if>
            <if test="evaluationResult != null">
                evaluation_result = #{evaluationResult,jdbcType=VARCHAR},
            </if>
            <if test="repairStatus != null">
                repair_status = #{repairStatus,jdbcType=INTEGER},
            </if>
            <if test="emergeStatus != null">
                emerge_status = #{emergeStatus,jdbcType=INTEGER},
            </if>
            <if test="repairTypeId != null">
                repair_type_id = #{repairTypeId,jdbcType=INTEGER},
            </if>
            <if test="repairTimeConsuming != null">
                repair_time_consuming = #{repairTimeConsuming,jdbcType=VARCHAR},
            </if>
        </set>
        where code = #{code,jdbcType=BIGINT}
    </update>
    <update id="updateByPrimaryKey" parameterType="com.jinchi.common.domain.DeviceRepairApplication">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Mon Mar 30 15:10:53 CST 2020.
        -->
        update device_repair_application
        set dept_code = #{deptCode,jdbcType=INTEGER},
        device_code = #{deviceCode,jdbcType=BIGINT},
        device_name = #{deviceName,jdbcType=VARCHAR},
        fixedassets_code = #{fixedassetsCode,jdbcType=VARCHAR},
        fault_content = #{faultContent,jdbcType=VARCHAR},
        report_time = #{reportTime,jdbcType=TIMESTAMP},
        report_people = #{reportPeople,jdbcType=INTEGER},
        report_phone = #{reportPhone,jdbcType=VARCHAR},
        receive_time = #{receiveTime,jdbcType=TIMESTAMP},
        receive_people = #{receivePeople,jdbcType=INTEGER},
        receive_phone = #{receivePhone,jdbcType=VARCHAR},
        fault_reason = #{faultReason,jdbcType=VARCHAR},
        finish_time = #{finishTime,jdbcType=TIMESTAMP},
        evaluation_time = #{evaluationTime,jdbcType=TIMESTAMP},
        evaluation_result = #{evaluationResult,jdbcType=VARCHAR},
        repair_status = #{repairStatus,jdbcType=INTEGER},
        emerge_status = #{emergeStatus,jdbcType=INTEGER},
        repair_type_id = #{repairTypeId,jdbcType=INTEGER},
        repair_time_consuming = #{repairTimeConsuming,jdbcType=VARCHAR}
        where code = #{code,jdbcType=BIGINT}
    </update>
    <select id="selectBycondition" resultType="com.jinchi.common.domain.DeviceRepairApplication">
  ${sql}
  </select>

    <select id="getDoneJson" resultType="Map">
        select re.code as 维修编号,
        dept.name as 部门,
        re.device_name as 设备名,
        re.fixedassets_code as 固定资产编码,
        re.fault_content as 故障描述,
        re.report_time as 报修时间,
        re.report_people as 报修人,
        re.report_phone as 报修人联系电话,
        re.receive_time as 接单时间,
        re.receive_people as 接单人,
        re.receive_phone as 接单人联系电话,
        re.fault_reason as 故障原因,
        re.finish_time as 完成时间,
        re.evaluation_time as 评价时间,
        re.evaluation_result as 评价结果,
        re.emerge_status as 紧急程度
        from device_repair_application as re,basic_info_dept as dept
        where re.dept_code = dept.code
        and re.dept_code = #{deptCode}
        and (repair_status = #{repairStatus})
        and (device_name like #{condition})
        <if test="startTime != null">
            and (report_time &gt;= #{startTime})
            and (report_time &lt;= #{endTime})
        </if>
    </select>

  <select id="count" resultType="java.lang.Integer">
    ${sql}
  </select>
</mapper>